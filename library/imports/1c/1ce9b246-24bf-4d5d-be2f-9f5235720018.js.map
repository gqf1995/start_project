{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n         // 主角跳跃高度\r\n        jumpHeight: 0,\r\n        // 主角跳跃持续时间\r\n        jumpDuration: 0,\r\n         // 辅助形变动作时间\r\n        squashDuration: 0,\r\n        // 最大移动速度\r\n        maxMoveSpeed: 0,\r\n        // 加速度\r\n        accel: 0,\r\n         // 跳跃音效资源\r\n        jumpAudio: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n\r\n    },\r\n    \r\n    setJumpAction: function () {\r\n        cc.log(\"player:setJumpAction\");\r\n        // 跳跃上升\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.p(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        // 下落\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.p(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n         // 形变\r\n        var squash = cc.scaleTo(this.squashDuration, 1, 0.6);\r\n        var stretch = cc.scaleTo(this.squashDuration, 1, 1.2);\r\n        var scaleBack = cc.scaleTo(this.squashDuration, 1, 1);\r\n        // 添加一个回调函数，用于在动作结束时调用我们定义的其他方法\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n        // 不断重复，而且每次完成落地动作后调用回调来播放声音\r\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown, callback));\r\n    },\r\n    playJumpSound: function () {\r\n        // 调用声音引擎播放声音\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n    getCenterPos: function () {\r\n        var centerPos = cc.p(this.node.x, this.node.y + this.node.height/2);\r\n        return centerPos;\r\n    },\r\n    startMoveAt: function (pos) {\r\n        cc.log(\"player:startMoveAt\");\r\n        this.enabled = true;\r\n        this.xSpeed = 0;\r\n        this.node.setPosition(pos);\r\n        this.node.runAction(this.setJumpAction());\r\n    },\r\n\r\n    stopMove: function () {\r\n        cc.log(\"player:stopMove\");\r\n        this.node.stopAllActions();\r\n    },\r\n    setInputControl: function () {\r\n        var self = this;\r\n        // 添加键盘事件监听\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.KEYBOARD,\r\n            // 有按键按下时，判断是否是我们指定的方向控制键，并设置向对应方向加速\r\n            onKeyPressed: function(keyCode, event) {\r\n                switch(keyCode) {\r\n                    case cc.KEY.a:\r\n                        self.accLeft = true;\r\n                        self.accRight = false;\r\n                        break;\r\n                    case cc.KEY.d:\r\n                        self.accLeft = false;\r\n                        self.accRight = true;\r\n                        break;\r\n                }\r\n            },\r\n            // 松开按键时，停止向该方向的加速\r\n            onKeyReleased: function(keyCode, event) {\r\n                switch(keyCode) {\r\n                    case cc.KEY.a:\r\n                        self.accLeft = false;\r\n                        break;\r\n                    case cc.KEY.d:\r\n                        self.accRight = false;\r\n                        break;\r\n                }\r\n            }\r\n        \r\n        }, self.node);\r\n    },\r\n    \r\n    onEnter: function () {  \r\n            cc.inputManager.setAccelerometerEnabled(true);                       \r\n          var self = this;\r\n            cc.eventManager.addListener({                                      \r\n                event: cc.EventListener.ACCELERATION,\r\n                callback: function(acc, event){     \r\n                    var facingUp = -1; \r\n                      if (acc.z > 0) { \r\n                        facingUp = +1; \r\n                      } \r\n                    var tiltLR=Math.round(((acc.x) / 9.81) * -90); \r\n                    var tiltFB = Math.round(((acc.y + 9.81) / 9.81) * 90 * facingUp);\r\n                    \r\n                    /*cc.log(\"LR\"+tiltLR);\r\n                    cc.log(\"FB\"+tiltFB);\r\n                     cc.log(\"x\"+acc.x);\r\n                      cc.log(\"y\"+acc.y);*/\r\n                      //判断左右重力\r\n                      if(tiltLR>0){\r\n                          self.accLeft = true;\r\n                        self.accRight = false;\r\n                      }else if(tiltLR<0){\r\n                          self.accLeft = false;\r\n                        self.accRight = true;\r\n                      }else{\r\n                          self.accLeft = false;\r\n                        self.accRight = false;\r\n                      }\r\n                }\r\n            }, self.node);  \r\n    },  \r\n    \r\n    // use this for initialization\r\n    onLoad: function () {\r\n         this.enabled = false;\r\n        cc.log(\"player:onLoad\");\r\n        // 加速度方向开关\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n        // 主角当前水平方向速度\r\n        this.xSpeed = 0;\r\n\r\n\r\n         // 设置左右边距\r\n        //this.minPosX = -this.node.parent.width/2;\r\n        //this.maxPosX = this.node.parent.width/2;\r\n        \r\n       \r\n        this.node.setPositionY(0+this.node.height/2);\r\n        \r\n        // 初始化跳跃动作\r\n        this.jumpAction = this.setJumpAction();\r\n        //this.node.runAction(this.jumpAction);\r\n\r\n        // 初始化键盘输入监听\r\n        this.setInputControl();\r\n        this.onEnter();\r\n        \r\n        \r\n    },\r\n    \r\n    update: function (dt) {\r\n        // 根据当前加速度方向每帧更新速度\r\n        if (this.accLeft) {\r\n            this.xSpeed -= this.accel * dt;\r\n        } else if (this.accRight) {\r\n            this.xSpeed += this.accel * dt;\r\n        }\r\n        // 限制主角的速度不能超过最大值\r\n        if ( Math.abs(this.xSpeed) > this.maxMoveSpeed ) {\r\n            // if speed reach limit, use max speed with current direction\r\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);\r\n        }\r\n        \r\n        //cc.log(\"player:update\");\r\n        // 根据当前速度更新主角的位置\r\n        this.node.x += this.xSpeed * dt;\r\n        \r\n        //判断是否到达屏幕边缘\r\n        \r\n        if ( this.node.x > this.node.parent.width/2) {\r\n            this.node.x = this.node.parent.width/2;\r\n            this.xSpeed = 0;\r\n        } else if (this.node.x < -this.node.parent.width/2) {\r\n            this.node.x = -this.node.parent.width/2;\r\n            this.xSpeed = 0;\r\n        }\r\n        \r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}